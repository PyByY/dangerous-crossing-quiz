<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dangerous Crossing - Story Quiz</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
body{
    font-family:sans-serif;
    background:linear-gradient(135deg,#4c51bf,#2d3748);
    color:white;
    height:100vh;
    margin:0;
    display:flex;
    justify-content:center;
    align-items:center;
}
.card{
    background:rgba(255,255,255,.12);
    backdrop-filter:blur(12px);
    padding:30px;
    border-radius:20px;
    width:90%;
    max-width:700px;
}
.option{
    display:block;
    width:100%;
    margin:6px 0;
    padding:12px;
    border-radius:10px;
    background:rgba(255,255,255,.15);
}
.option:hover{
    background:rgba(99,102,241,.5);
}
.btn-magic{
    background:linear-gradient(45deg,#ed64a6,#9f7aea,#667eea);
    padding:12px 20px;
    border-radius:12px;
    font-weight:bold;
}
.hidden-screen{display:none;}

/* PRINT MODE */
@media print{
    body * { visibility:hidden; }

    #certificate, #certificate * {
        visibility:visible;
    }

    #certificate{
        position:absolute;
        left:0;
        top:0;
        width:100%;
        margin:0;
        box-shadow:none;
    }
}
</style>
</head>

<body>

<!-- START SCREEN -->
<div id="start-screen" class="card text-center">
    <h1 class="text-3xl mb-3">üåâ Dangerous Crossing</h1>
    <p class="mb-4">Grade 5 Story Quiz</p>

    <input id="player-name"
        class="w-full p-3 rounded text-black mb-4"
        placeholder="Enter your name">

    <button onclick="startGame()" class="btn-magic w-full">
        Start Quiz
    </button>
</div>

<!-- GAME SCREEN -->
<div id="game-screen" class="hidden-screen card">
    <div class="flex justify-between mb-4">
        <span id="display-name"></span>
        <span>‚≠ê <span id="star-count">0</span></span>
    </div>

    <div id="question-container"></div>
    <p id="feedback" class="mt-3 font-bold"></p>
</div>

<!-- END / CERTIFICATE SCREEN -->
<div id="end-screen" class="hidden-screen card text-center">

    <h2 class="text-3xl mb-4">üèÜ Story Master Certificate</h2>

    <div id="certificate" class="bg-white text-black p-8 rounded-lg shadow-lg">

        <h1 class="text-3xl font-bold mb-3">
            Certificate of Achievement
        </h1>

        <p>This certificate is proudly awarded to</p>

        <h2 id="cert-name"
            class="text-4xl my-4 text-purple-700 font-bold"></h2>

        <p>For successfully completing the</p>
        <p class="font-bold">Dangerous Crossing Story Quiz</p>

        <p class="mt-3">Score: ‚≠ê <span id="cert-stars"></span></p>
        <p>Date: <span id="cert-date"></span></p>
    </div>

    <div class="mt-5">
        <button onclick="printCertificate()" class="btn-magic mr-2">
            üñ®Ô∏è Print Certificate
        </button>

        <button onclick="location.reload()" class="btn-magic">
            Play Again
        </button>
    </div>
</div>

<script>
let playerName="";
let currentQuestion=0;
let stars=0;

/* STORY QUESTIONS (edit these anytime) */
const questions=[
{
question:"What problem did the main character face at the crossing?",
options:[
"The water was strong and unsafe",
"They lost their map",
"They were late for school",
"The weather was too hot"
],
answer:"The water was strong and unsafe"
},
{
question:"Why did the character feel nervous before crossing?",
options:[
"They had never crossed before",
"They were tired",
"They were angry",
"They wanted to turn back"
],
answer:"They had never crossed before"
},
{
question:"How did teamwork help in the story?",
options:[
"They formed a safe line and helped each other",
"They raced each other",
"They ignored the danger",
"They shouted loudly"
],
answer:"They formed a safe line and helped each other"
},
{
question:"What smart choice was made during the crossing?",
options:[
"Running fast",
"Listening to advice and crossing carefully",
"Ignoring warnings",
"Crossing alone"
],
answer:"Listening to advice and crossing carefully"
},
{
question:"What lesson does the story teach?",
options:[
"Bravery and teamwork help overcome danger",
"Always rush",
"Never ask for help",
"Danger is fun"
],
answer:"Bravery and teamwork help overcome danger"
}
];

function startGame(){
    const input=document.getElementById("player-name");
    if(!input.value.trim()) return;

    playerName=input.value.trim();

    document.getElementById("start-screen").classList.add("hidden-screen");
    document.getElementById("game-screen").classList.remove("hidden-screen");

    document.getElementById("display-name").innerText=playerName;

    loadQuestion();
}

function loadQuestion(){
    const q=questions[currentQuestion];
    const box=document.getElementById("question-container");

    box.innerHTML=`<h2 class="text-xl mb-3">${q.question}</h2>`;
    document.getElementById("feedback").innerText="";

    q.options.forEach(opt=>{
        const b=document.createElement("button");
        b.className="option";
        b.innerText=opt;
        b.onclick=()=>checkAnswer(opt);
        box.appendChild(b);
    });
}

function checkAnswer(ans){
    const q=questions[currentQuestion];

    if(ans===q.answer){
        stars++;
        document.getElementById("star-count").innerText=stars;
        document.getElementById("feedback").innerText="‚ú® Correct!";

        setTimeout(nextQuestion,700);
    }else{
        document.getElementById("feedback").innerText="‚ùå Try again!";
    }
}

function nextQuestion(){
    currentQuestion++;

    if(currentQuestion < questions.length){
        loadQuestion();
    }else{
        endGame();
    }
}

function endGame(){
    document.getElementById("game-screen").classList.add("hidden-screen");
    document.getElementById("end-screen").classList.remove("hidden-screen");

    document.getElementById("cert-name").innerText = playerName;
    document.getElementById("cert-stars").innerText = stars;

    const today = new Date();
    document.getElementById("cert-date").innerText =
        today.toLocaleDateString();
}

function printCertificate(){
    window.print();
}
</script>

</body>
</html>
